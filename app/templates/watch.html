{% extends "layout.html" %}

{% block content %}
<div class="watch-container">
    
    <div class="video-wrapper">
        <video controls autoplay class="main-player" poster="{{ url_for('stream.stream_file', filename=video.thumbnail) }}">
            <source src="{{ url_for('stream.stream_file', filename=video.filename) }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <div class="video-details">
        <h1 class="video-title">{{ video.title }}</h1>
        
        <div class="video-meta">
            <div class="meta-content">
                <span class="upload-date">Uploaded on {{ video.created_at }}</span>
                {% if video.tags %}
                    <span class="separator">â€¢</span>
                    <div class="tags-container">
                        {% for tag in video.tags %}
                            <span class="tag">#{{ tag }}</span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="description-box">
            <p>{{ video.description }}</p>
        </div>
    </div>

</div>

<style>
    /* CHANGED: Reduced max-width from 1400px to 1000px for a standard player size */
    .watch-container { max-width: 1000px; margin: 0 auto; padding: 24px; }
    
    /* Player */
    .video-wrapper { 
        width: 100%; aspect-ratio: 16/9; background: black; border-radius: 16px; 
        overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); margin-bottom: 20px;
    }
    .main-player { width: 100%; height: 100%; outline: none; }

    /* Info */
    .video-details { color: white; }
    .video-title { font-size: 1.5rem; margin-bottom: 12px; font-weight: 700; }
    
    .video-meta { 
        padding-bottom: 16px; border-bottom: 1px solid #333; margin-bottom: 16px;
    }
    
    .meta-content { display: flex; align-items: center; flex-wrap: wrap; gap: 10px; }

    .upload-date { color: #aaa; font-size: 0.9rem; }
    .separator { color: #555; }
    
    /* Tags */
    .tags-container { display: inline-flex; gap: 8px; }
    .tag { color: #3b82f6; font-size: 0.9rem; }

    /* Description */
    .description-box { 
        background: #1a1a1a; padding: 16px; border-radius: 12px; 
        font-size: 0.95rem; line-height: 1.5; color: #ddd; white-space: pre-wrap;
    }
</style>
{% endblock %}