{% extends "layout.html" %}

{% block content %}
<div class="auth-container">
    <div class="auth-box">
        <h2>Welcome Back</h2>
        <p class="auth-subtitle">Login to manage your videos</p>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('auth.login') }}">
            
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" name="email" id="email" required placeholder="you@example.com">
            </div>

            <div class="form-group">
                <label for="password">Password</label>
                <div class="password-wrapper">
                    <input type="password" name="password" id="password" required placeholder="Enter your password">
                    <button type="button" class="toggle-password" onclick="togglePassword()">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                </div>
            </div>

            <div class="form-group checkbox-group">
                <input type="checkbox" name="remember" id="remember">
                <label for="remember">Remember me</label>
            </div>

            <button type="submit" class="auth-btn">Log In</button>
        </form>

        <div class="auth-footer">
            Don't have an account? <a href="{{ url_for('auth.signup') }}">Sign Up</a>
        </div>
    </div>
</div>

<style>
    /* Same styles as Signup for consistency */
    .auth-container { display: flex; justify-content: center; align-items: center; min-height: 80vh; padding: 20px; }
    .auth-box { background: #1a1a1a; padding: 2.5rem; border-radius: 16px; width: 100%; max-width: 400px; border: 1px solid #333; }
    .auth-box h2 { color: white; margin-bottom: 0.5rem; text-align: center; }
    .auth-subtitle { color: #888; text-align: center; margin-bottom: 2rem; font-size: 0.9rem; }
    
    .form-group { margin-bottom: 1.25rem; }
    .form-group label { display: block; color: #ddd; margin-bottom: 0.5rem; font-size: 0.9rem; font-weight: 500; }
    
    .form-group input[type="email"], 
    .form-group input[type="password"] { 
        width: 100%; padding: 12px; background: #0f0f0f; border: 1px solid #333; 
        border-radius: 8px; color: white; outline: none; transition: 0.2s; 
    }
    .form-group input:focus { border-color: #3b82f6; }
    
    /* TOGGLE BUTTON STYLE */
    .password-wrapper { position: relative; }
    .toggle-password {
        position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
        background: none; border: none; color: #888; cursor: pointer; font-size: 0.9rem;
    }
    .toggle-password:hover { color: #3b82f6; }

    .checkbox-group { display: flex; align-items: center; gap: 10px; }
    .checkbox-group input { width: auto; accent-color: #3b82f6; cursor: pointer; }
    .checkbox-group label { margin-bottom: 0; cursor: pointer; color: #aaa; font-size: 0.9rem; }

    .auth-btn { 
        width: 100%; padding: 12px; background-color: #3b82f6; color: white; 
        border: none; border-radius: 8px; font-weight: 600; font-size: 1rem; 
        cursor: pointer; margin-top: 1rem; transition: 0.2s;
    }
    .auth-btn:hover { background-color: #2563eb; }

    .auth-footer { text-align: center; margin-top: 1.5rem; color: #888; font-size: 0.9rem; }
    .auth-footer a { color: #3b82f6; text-decoration: none; font-weight: 600; }
    
    .alert { padding: 10px; border-radius: 6px; margin-bottom: 1rem; font-size: 0.9rem; background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid #ef4444; }
</style>

<script>
    function togglePassword() {
        const input = document.getElementById('password');
        const icon = document.querySelector('.toggle-password i');
        if (input.type === "password") {
            input.type = "text";
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            input.type = "password";
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }
</script>
{% endblock %}